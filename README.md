#微信

> 对于腾讯微信产品的一些理解

[TOC]

##产品特性

###- 微信的用户数据机制：
**在用户层面呈现的是双向效果，即有别于微博的互相关注，但在后台层面用户个体数据相互独立。**基于此，一方删除了另一方好友，但另一方好友通讯录中仍有此人；更重要的是，这为将用户标签化，实现朋友圈权限功能提供了支持。

###- 微信朋友圈的性能问题：
- 如果按照传统的数据结构，实现朋友圈消息筛选的逻辑是，先将所有通讯录中用户发布的消息全部get到，然后剔除屏蔽的用户消息，最后将得到的数据呈现出来。这种方式效率低下，对于微信这种量级的产品会产生性能问题。
- **微信朋友圈采用的是利用零散时间进行关系计算**：简单来说，就是平时服务器就把每个用户通讯录中拥有朋友圈访问权限的用户ID存储起来，等到用户刷新朋友圈时直接通过绑定的ID来读取信息，从而节约了数据资源。对于发布者来说，也是在发布时就向服务器上传了权限信息，并做好了权限安排。其表现有，如果发布一条限定可见的朋友圈，后加入限定条件的朋友无法看到。（如果发布一条限定不可见的朋友圈，后加入的朋友都能看到）。
